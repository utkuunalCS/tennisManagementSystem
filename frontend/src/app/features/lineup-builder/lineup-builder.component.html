<div class="lineup-builder">
  <div class="header">
    <h1>Lineup Builder</h1>
    <div class="actions">
      <button mat-raised-button color="primary" (click)="saveLineup()" [disabled]="!isLineupComplete()">
        <mat-icon>save</mat-icon>
        Save Lineup
      </button>
      <button mat-raised-button (click)="loadLineup()">
        <mat-icon>folder_open</mat-icon>
        Load Lineup
      </button>
      <button mat-raised-button (click)="clearLineup()">
        <mat-icon>clear_all</mat-icon>
        Clear Lineup
      </button>
      <button mat-raised-button [matMenuTriggerFor]="exportMenu">
        <mat-icon>download</mat-icon>
        Export
      </button>
      <mat-menu #exportMenu="matMenu">
        <button mat-menu-item (click)="exportAsPNG()">
          <mat-icon>image</mat-icon>
          <span>Export as PNG</span>
        </button>
        <button mat-menu-item (click)="exportAsJPEG()">
          <mat-icon>image</mat-icon>
          <span>Export as JPEG</span>
        </button>
      </mat-menu>
    </div>
  </div>

  <div class="content" *ngIf="!loading">
    <div class="player-pool-section">
      <app-player-pool 
        [players]="players" 
        [usedPlayerIds]="getUsedPlayerIds()">
      </app-player-pool>
    </div>

    <div class="lineup-section">
      <app-match-lineup 
        [matchSlots]="matchSlots"
        [usedPlayerIds]="getUsedPlayerIds()"
        (playerDropped)="onPlayerDropped($event)"
        (playerRemoved)="onPlayerRemoved($event)">
      </app-match-lineup>
    </div>
  </div>

  <div class="loading" *ngIf="loading">
    <mat-spinner></mat-spinner>
  </div>
</div>
